version: 2

models:
  - name: stg_customer
    description: "Datos de clientes, staging"
    columns:
      - name: customer_id
        tests:
          - not_null
          - unique
      - name: nation_id
        tests:
          - relationships:
              arguments:
                field: nation_id
                to: ref('stg_nation')
      - name: mkt_segment
        tests:
          - accepted_values:
              arguments:
                values:
                  - Automobile
                  - Building
                  - Machinery
                  - Household
                  - Furniture

  - name: stg_orders
    description: "Datos de Ã³rdenes, staging"
    columns:
      - name: order_id
        tests:
          - not_null
          - unique
      - name: customer_id
        tests:
          - relationships:
              arguments:
                field: customer_id
                to: ref('stg_customer')
      - name: order_status
        tests:
          - accepted_values:
              arguments:
                values:
                  - P
                  - F
                  - O
      - name: order_date
        tests:
          - not_null
          - valid_date
      - name: total_price
        tests:
          - positive_value

  - name: stg_lineitem
    description: "Datos de line items, staging"
    columns:
      - name: order_id
        tests:
          - not_null
          - relationships:
              arguments:
                field: order_id
                to: ref('stg_orders')
      - name: part_id
        tests:
          - not_null
          - relationships:
              arguments:
                field: part_id
                to: ref('stg_part')
      - name: supplier_id
        tests:
          - not_null
          - relationships:
              arguments:
                field: supplier_id
                to: ref('stg_supplier')
      - name: line_number
        tests:
          - not_null
      - name: quantity
        tests:
          - positive_value
      - name: return_flag
        tests:
          - accepted_values:
              arguments:
                values:
                  - R
                  - N
                  - A
      - name: line_status
        tests:
          - accepted_values:
              arguments:
                values:
                  - F
                  - O
      - name: extended_price
        tests:
          - positive_value
      - name: discount
        tests:
          - positive_value
      - name: tax
        tests:
          - positive_value
      - name: ship_date
        tests:
          - valid_date
      - name: commit_date
        tests:
          - valid_date
      - name: receipt_date
        tests:
          - valid_date

  - name: stg_part
    description: "Datos de partes, staging"
    columns:
      - name: part_id
        tests:
          - not_null
          - unique
      - name: size
        tests:
          - positive_value
      - name: retail_price
        tests:
          - positive_value

  - name: stg_supplier
    description: "Datos de proveedores, staging"
    columns:
      - name: supplier_id
        tests:
          - not_null
          - unique
      - name: name
      - name: nation_id
        tests:
          - relationships:
              arguments:
                field: nation_id
                to: ref('stg_nation')

  - name: stg_partsupp
    description: "Datos de partsupp, staging"
    columns:
      - name: part_id
        tests:
          - not_null
          - relationships:
              arguments:
                field: part_id
                to: ref('stg_part')
      - name: supplier_id
        tests:
          - not_null
          - relationships:
              arguments:
                field: supplier_id
                to: ref('stg_supplier')
      - name: availability
        tests:
          - positive_value
      - name: supply_cost
        tests:
          - positive_value

  - name: stg_nation
    description: "Datos de naciones, staging"
    columns:
      - name: nation_id
        tests:
          - not_null
          - unique
      - name: region_id
        tests:
          - not_null
          - relationships:
              arguments:
                field: region_id
                to: ref('stg_region')

  - name: stg_region
    description: "Datos de regiones, staging"
    columns:
      - name: region_id
        tests:
          - not_null
          - unique